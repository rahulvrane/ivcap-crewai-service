{
  "$schema": "urn:sd-core:schema.crewai.request.1",
  "name": "Document Reader and Synthesizer",
  "inputs": {},
  "artifact-urns": [
    "urn:ivcap:artifact:8e485dca-f5cf-4e81-ab4a-b916066ec083",
    "urn:ivcap:artifact:2569e489-33d5-47df-ab4a-9745d776e40e"
  ],
  "crew": {
    "$schema": "urn:sd:schema:icrew-crew.1",
    "id": "urn:sd:crewai:crew.document_reader",
    "name": "Document Reader Crew",
    "placeholders": [],
    "agents": [
      {
        "name": "extractor",
        "role": "Document Information Extractor",
        "goal": "Read all documents in the inputs directory and extract key information, facts, and insights from each document",
        "backstory": "You are a careful reader who extracts information accurately. You read documents thoroughly, noting the source of each piece of information. You never make up or hallucinate information - you only report what you actually read in the documents.",
        "tools": [
          {
            "id": "builtin:DirectoryReadTool",
            "name": "DirectoryReadTool",
            "description": "Lists all files in the inputs directory"
          },
          {
            "id": "builtin:DirectorySearchTool",
            "name": "DirectorySearchTool",
            "description": "Semantic search across all files in the directory using RAG/embeddings"
          }
        ],
        "memory": true,
        "allow_delegation": false,
        "max_iter": 10,
        "verbose": true
      },
      {
        "name": "synthesizer",
        "role": "Information Synthesizer",
        "goal": "Take the extracted information and create a clear, organized summary that combines insights from all documents",
        "backstory": "You are a skilled writer who excels at taking information from multiple sources and weaving it into a coherent narrative. You maintain attribution to sources and highlight connections between different pieces of information. You only use information provided to you - you never add facts that weren't extracted.",
        "tools": [],
        "memory": true,
        "allow_delegation": false,
        "max_iter": 8,
        "verbose": true
      }
    ],
    "tasks": [
      {
        "name": "extract_information",
        "description": "Step 1: Use DirectoryReadTool to list all files in the inputs directory.\n\nStep 2: Use DirectorySearchTool to search for key information across all documents. Run multiple searches with different queries like:\n- 'main topics and themes'\n- 'key facts and data points'\n- 'conclusions and recommendations'\n- 'important dates and numbers'\n- 'notable quotes and insights'\n\nStep 3: Extract and organize the information found, clearly noting which queries found which information.\n\nStep 4: Organize your findings by document and by theme, clearly noting which document each piece of information came from.",
        "expected_output": "# Extracted Information from Documents\n\n## Document 1: [filename]\n**Main Topics:**\n- Topic 1\n- Topic 2\n\n**Key Facts:**\n- Fact 1\n- Fact 2\n\n**Important Details:**\n- Detail 1\n- Detail 2\n\n## Document 2: [filename]\n**Main Topics:**\n- Topic 1\n- Topic 2\n\n**Key Facts:**\n- Fact 1\n- Fact 2\n\n**Important Details:**\n- Detail 1\n- Detail 2\n\n[Continue for each document found]\n\n## Summary Statistics\n- Total documents read: [number]\n- Total files in directory: [number]\n- Documents successfully processed: [number]",
        "agent": "extractor",
        "async_execution": false,
        "tools": []
      },
      {
        "name": "synthesize_findings",
        "description": "Review the extracted information from all documents and create a synthesized summary.\n\nStep 1: Identify common themes across all documents\n\nStep 2: Group related information together\n\nStep 3: Highlight connections and relationships between information from different documents\n\nStep 4: Note any contradictions or differing perspectives\n\nStep 5: Create a clear, flowing narrative that presents the combined insights\n\nIMPORTANT: Only use information from the extraction. Do not add new facts or information.",
        "expected_output": "# Synthesized Summary\n\n## Overview\n[2-3 paragraphs providing a high-level summary of what the documents contain, mentioning which documents contributed to each point]\n\n## Key Themes\n\n### Theme 1: [Name]\n[Description combining insights from multiple documents, with clear attribution like \"According to document X...\" or \"Document Y shows...\"]\n\n### Theme 2: [Name]\n[Description with attribution]\n\n### Theme 3: [Name]\n[Description with attribution]\n\n## Notable Findings\n- Finding 1 (from [document name])\n- Finding 2 (from [document name])\n- Finding 3 (combining insights from [document names])\n\n## Cross-Document Insights\n- [Insight that connects information from multiple documents]\n- [Another cross-cutting insight]\n\n## Document Coverage\n- Documents analyzed: [list of filenames]\n- Total sources: [number]\n\n---\n\nNote: This synthesis is based entirely on the provided documents. All statements can be traced back to specific source documents.",
        "agent": "synthesizer",
        "context": ["extract_information"],
        "async_execution": false,
        "tools": []
      }
    ],
    "verbose": true,
    "process": "sequential"
  }
}

